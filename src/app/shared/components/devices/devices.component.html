<div class="row justify-content-end">
    <div class="col-1 ps-1">
    <nb-actions size="medium">
        <nb-action nbTooltip="Add" nbTooltipPlacement="top" icon="plus-circle-outline"
            (click)="open(devicedialog)"></nb-action>
    </nb-actions>
</div>
</div>

<ng-template #devicedialog>
    <nb-card class="dialog-card">
        <nb-card-header>
            <h6 class="text-center">{{'kAddDevice' | translate}}</h6>
        </nb-card-header>
        <nb-card-body>
            <form [formGroup]="deviceForm">
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group mb-1">
                                <label for="deviceTypes" class="label"> <span class="text-danger">*</span>
                                    {{'kDeviceType' | translate}}</label>
                                    <nb-select id="deviceTypes" size="medium" fullWidth formControlName="deviceType"
                                         placeholder="Select Device type" (selectedChange)="onchange($event)">
                                        <nb-option *ngFor="let item of devices" [value]="item">
                                            {{item?.type}}</nb-option>
                                    </nb-select>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                         <div class="form-group mb-1">
                            <label for="manufacturer" class="label"> <span class="text-danger">*</span>
                                {{'kManufacturer' | translate}}</label>
                            <input type="text" fieldSize="medium" formControlName="manufacturer" nbInput fullWidth
                                id="manufacturer" placeholder="{{'kManufacturer' | translate}}">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                         <div class="form-group mb-1">
                            <label for="deviceName" class="label"> <span class="text-danger">*</span>
                                {{'kDeviceName' | translate}}</label>
                            <input type="text" fieldSize="medium" formControlName="deviceName" nbInput fullWidth
                                id="deviceName" placeholder="{{'kDeviceName' | translate}}">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="form-group mb-1">
                            <label for="serialNumber" class="label">
                                {{'kSerialNumber' | translate}}</label>
                            <input type="text" fieldSize="medium" formControlName="serialNumber" nbInput fullWidth
                                id="serialNumber" placeholder="{{'kSerialNumber' | translate}}">
                        </div>
                    </div>
                </div>
            </form>
        </nb-card-body>
        <nb-card-footer>
            <div class="row justify-content-end">
                <div class="col-5 pe-2">
                    <button nbButton status="danger" class="w-100" size="medium" (click)="refclose()">{{'kCancel' | translate}}</button>
                </div>
                <div class="col-5 ps-2">
                    <button nbButton status="success" class="w-100" size="medium" [disabled]="!deviceForm.valid"
                    (click)="save()">{{'kSave' | translate}}</button>
                </div>
            </div>
        </nb-card-footer>

    </nb-card>
</ng-template>
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col" class="subtitle">{{'kManufacturer' | translate}}</th>
            <th scope="col" class="subtitle">{{'kDeviceType' | translate}}</th>
            <th scope="col" class="subtitle">{{'kDeviceName' | translate}}</th>
            <th scope="col" class="subtitle">{{'kSerialNumber' | translate}}</th>
            <th class="text-center subtitle" scope="col">{{'kActions' | translate}}</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let item of deviceList; let i=index">
            <td class="subtitle">{{item.manufacturer}}</td>
            <td class="subtitle">{{item.deviceType}}</td>
            <td class="subtitle">{{item.deviceName}}</td>
            <td class="subtitle">{{item.serialNumber}}</td>
            <td class="text-center">
                <nb-icon icon="trash" nbTooltip="Delete" class="icon-font" (click)="openDialog(deleteDialog, i)" nbTooltipStatus="control"
                    status="danger" pack="font-awesome" nbTooltipStatus="black"></nb-icon>
            </td>
        </tr>
        <tr *ngIf="deviceList.length==0" class="text-center">
            <td colspan="5">
                <p>{{'kNoRecordsFound' | translate}}</p>
            </td>
        </tr>
    </tbody>
</table>
<ng-template #deleteDialog>
    <nb-card class="dialog-card">
        <nb-card-header>
            <p class="subtitle">{{'kAreYouSureWantToDelete' | translate}}?</p>
        </nb-card-header>
        <nb-card-body>
            <div class="float-end">
                <button nbButton status="success" size="small" (click)="delete()">{{'kYes' | translate}}</button>
                <button nbButton status="danger" class="ms-2" size="small" (click)="close()">{{'kNo' | translate}}</button>
            </div>
        </nb-card-body>
    </nb-card>
</ng-template>