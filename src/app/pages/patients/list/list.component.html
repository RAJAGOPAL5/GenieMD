<nb-card class="patient-list mb-0" [nbSpinner]="isLoading">
    <nb-card-header class="justify-content-center p-0">
        <nb-list-item class="pb-0">
            <div class="row m-auto">
                <div class="col-auto mx-auto mb-3">
                    <nb-button-group status="primary" size="tiny">
                        <button nbButtonToggle nbButton pressed (click)= "loadNext(undefined, 0)" >{{'kAll' | translate}}</button>
                        <button nbButtonToggle nbButton (click)="loadNext(undefined,1)">{{'kMonitored' | translate}}</button>
                    </nb-button-group>
                </div>
                <div class="col-auto mt-1 mx-auto mb-3 position-relative">
                    <div class="badge-position cursor-pointer" *ngIf = "isFilter"><nb-badge text="99+" status="danger" position="top left" dotMode = true (click)="filterPatient()"></nb-badge></div>
                    <nb-actions size="tiny">
                        <nb-action class="ps-0 pe-0" nbTooltip="Filter" nbTooltipPlacement="top" icon="funnel-outline" (click)="filterPatient()">
                        </nb-action>
                        <nb-action nbTooltip="Add Patient" nbTooltipPlacement="top" class="pe-0" icon="plus-circle-outline" (click)="addPatient()"></nb-action>
                    </nb-actions>
                </div>
            </div>
        </nb-list-item>
        <nb-list-item>
            <nb-form-field class="w-100">
                <nb-icon nbPrefix icon="search-outline" pack="eva"></nb-icon>
                <input type="search" id='searchText' name="searchText" fullWidth status="success" nbInput [(ngModel)]="searchText" (search)="search()"
                     #SearchInput>
            </nb-form-field>
        </nb-list-item>
    </nb-card-header>
    <nb-list class="own-scroll" nbInfiniteList [threshold]="15" (bottomThreshold)="loadNext()" >
        <nb-list-item class="cursor-pointer d-flex justify-content-between" *ngFor="let user of users"
            [routerLink]="[user?.patientID, 'vitals']">
            <nb-user class="cursor-pointer warning"
                [ngClass]="{'none': user.monitored == 0,'success': user.alarm == 0 && user.monitored == 1, 'warning': user.alarm == 1 && user.monitored == 1, 'danger': user.alarm == 2 && user.monitored == 1}"
                [name]="user.name" [title]="user.dob" [picture]="user.imageUrl">
            </nb-user>
            <nb-icon nbTooltip="Edit" icon="edit-outline" (click)="addPatient(user?.patientID);$event.stopPropagation();"></nb-icon>
        </nb-list-item>
        <nb-list-item *ngIf="!users?.length">
            <p>{{'kNoPatientFound' | translate}} <a (click)="addPatient()">{{'kCreateNewPatient' | translate}}</a></p>
        </nb-list-item>
    </nb-list>
</nb-card> 