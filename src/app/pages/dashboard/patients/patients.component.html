<div class="pt-4" [nbSpinner]="isLoading">
    <div class="d-flex mb-4 ms-4 position-relative">
        <input type="search" fieldSize="medium" nbInput placeholder="Search With Name" class="mr-20" name="search" [(ngModel)]="searchText" (ngModelChange)="getList()">
        <button nbButton outline status="primary">Patients With No Readings</button>
        <nb-action class="ps-4 pe-2" nbTooltip="Filter" nbTooltipPlacement="top" icon="funnel-outline" (click)="filterPatient()">
        </nb-action>
        <!-- <div class="badge-position cursor-pointer" *ngIf="isFilter">
            <nb-badge text="99+" status="danger" dotMode=true (click)="filterPatient()"></nb-badge>
        </div> -->
        <nb-action class="ps-2" nbTooltip="Add Patient" nbTooltipPlacement="top" icon="plus-circle-outline" (click)="addPatient()"></nb-action>

        <!-- <div class="p-2 flex-shrink-1 cursor-pointer text-primary" (click)="addPatient()"><i class="fas fa-plus" style="padding-right: 10px;" (click)="addPatient()"></i>Add Patient</div> -->


    </div>
    <div>
        <ngx-datatable class="bootstrap cursor-pointer" [rows]="data" [columnMode]="ColumnMode.force" [scrollbarV]="true" [columns]="columns" [headerHeight]="headerHeight" [rowHeight]="rowHeight" [loadingIndicator]="isLoading" [scrollbarV]="true" (scroll)="onScroll($event.offsetY)"
            style="height: 600px;" (activate)="onActivate($event)">
            <ngx-datatable-column name="Name" headerClass="ps-4" cellClass="ps-4">
                <ng-template let-value="value" ngx-datatable-cell-template>
                    <span>{{value || '-'}}</span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Email" [maxWidth]="250">
                <ng-template let-value="value" ngx-datatable-cell-template>
                    <span>{{value || '-'}}</span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="DOB" [maxWidth]="250" headerClass="text-center" cellClass="text-center">
                <ng-template let-value="value" ngx-datatable-cell-template>
                    <span>{{value || '-'}}</span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Monitors" [maxWidth]="200" headerClass="text-center" cellClass="text-center">
                <ng-template let-value="value" ngx-datatable-cell-template let-row="row">
                    <span>{{row.vitals}}</span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Assigned Care Manager" headerClass="text-center" cellClass="text-center">
                <ng-template let-value="value" ngx-datatable-cell-template>
                    <span>{{profile?.screenName}}</span>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Contact" [maxWidth]="200" headerClass="text-center" cellClass="text-center">
                <ng-template let-value="value" ngx-datatable-cell-template>
                    <i class="fas fa-phone text-primary " nbTooltip="Call" nbTooltipStatus="basic"></i> <i class="far fa-comment-dots text-primary d-inline-block mx-2" nbTooltip="Chat" nbTooltipStatus="basic"></i> <i class="fas fa-video text-primary"
                        nbTooltip="Video" nbTooltipStatus="basic"></i>
                </ng-template>
            </ngx-datatable-column>
            <ngx-datatable-column name="Action" [maxWidth]="200" headerClass="text-center" cellClass="text-center" prop="monitored">
                <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                    <button nbButton outline [status]="row.monitored==1?'danger':'warning'" size="tiny" (click)="$event.stopPropagation(); openDialog(unEnrollDialog, row)">{{row.monitored ==1 ?'unenroll':'enroll'}}</button>
                </ng-template>
            </ngx-datatable-column>
        </ngx-datatable>
    </div>
</div>
<ng-template #unEnrollDialog>
    <nb-card class="dialog-card">
        <nb-card-header>
            <p class="subtitle">Are you sure want to {{type==1?'unenroll':'enroll'}}</p>
        </nb-card-header>
        <nb-card-body>
            <div class="float-end">
                <button nbButton status="success" size="small" (click)="submit()">{{'kYes' | translate}}</button>
                <button nbButton status="danger" class="ms-2" size="small" (click)="close()">{{'kNo' | translate}}</button>
            </div>
        </nb-card-body>
    </nb-card>
</ng-template>